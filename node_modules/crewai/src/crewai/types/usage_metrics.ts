import z from 'zod';

const UsageMetrics = z.object({
  total_tokens: z.number().int().default(0).describe("Total number of tokens used."),
  prompt_tokens: z.number().int().default(0).describe("Number of tokens used in prompts."),
  completion_tokens: z.number().int().default(0).describe("Number of tokens used in completions."),
  successful_requests: z.number().int().default(0).describe("Number of successful requests made.")
});

class UsageMetricsClass {
  constructor(data) {
    const validatedData = UsageMetrics.parse(data);
    Object.assign(this, validatedData);
  }

  addUsageMetrics(usageMetrics) {
    this.total_tokens += usageMetrics.total_tokens;
    this.prompt_tokens += usageMetrics.prompt_tokens;
    this.completion_tokens += usageMetrics.completion_tokens;
    this.successful_requests += usageMetrics.successful_requests;
  }
}

export { UsageMetrics: UsageMetricsClass };