import fs from 'fs/promises';
import path from 'path';

async function copyTemplate(srcFile, dstFile, name, className, folderName) {
    const content = await fs.readFile(srcFile, 'utf-8');
    const processedContent = content
        .replace(/{{name}}/g, name)
        .replace(/{{crew_name}}/g, className)
        .replace(/{{folder_name}}/g, folderName)
        .replace(/{{pipeline_name}}/g, className);
    await fs.writeFile(dstFile, processedContent);
}

function sanitizeName(name) {
    return name.replace(/[^a-zA-Z0-9]/g, '_').toLowerCase();
}

function camelToSnakeCase(str) {
    return str.replace(/[A-Z]/g, letter => `_${letter.toLowerCase()}`);
}

function snakeToCamelCase(str) {
    return str.replace(/_([a-z])/g, (_, letter) => letter.toUpperCase());
}

export {
    copyTemplate,
    sanitizeName,
    camelToSnakeCase,
    snakeToCamelCase
};